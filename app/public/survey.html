<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey Page</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
</head>

<body>
    <header class="h1">Survey Questions</header>
    <div class="row" style="margin: 50px">
        <form class="form" action="/action_page.php">
            <p class="h2">About You</p>
            <div class="form-group">
                <label for="username" class="h6">Name (Required)</label>
                <input type="name" class="form-control col-lg-6" id="username" placeholder="Jackie Chan">
            </div>
            <div class="form-group">
                <label for="userpicture" class="h6">Link to Photo Image (Required)</label>
                <input type="link" class="form-control col-lg-6" id="userpicture" placeholder="Picture link here">
            </div>
            <div class="form-group">
                <label for="sel1">You enjoy doing things you've never done before.</label>
                <select class="form-control col-lg-3" id="sel1">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel2">You like to make plans and stick to them.</label>
                <select class="form-control col-lg-3" id="sel2">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel3">You enjoy outdoor activities more than indoors.</label>
                <select class="form-control col-lg-3" id="sel3">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel4">You find it easy to stay relaxed and focused even when there is some pressure.</label>
                <select class="form-control col-lg-3" id="sel4">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel5">People can rarely upset you.</label>
                <select class="form-control col-lg-3" id="sel5">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel6">It is often difficult for you to relate to other people’s feelings.</label>
                <select class="form-control col-lg-3" id="sel6">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel7">In a discussion, truth should be more important than people’s sensitivities.</label>
                <select class="form-control col-lg-3" id="sel7">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel8">You rarely get carried away by fantasies and ideas.</label>
                <select class="form-control col-lg-3" id="sel8">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel9">You think that everyone’s views should be respected regardless of whether they are supported by facts or
                    not.</label>
                <select class="form-control col-lg-3" id="sel9">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sel10">You enjoy outdoor activities more than indoors.</label>
                <select class="form-control col-lg-3" id="sel10">
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <br></br>
            <!-- <button type="submit" class="btn btn-default" id="submitSurvey">Submit</button> -->
        </form>
    </div>
    <!-- Button trigger modal -->
    <button type="submit" id="submitSurvey" style="margin: 50px" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Submit
    </button>

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="myModalLabel">Best Match</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5 id="nameDisplay">
                        <span>Name</span>
                    </h5>
                    <div id="imageDisplay">
                        <image id="matchDisplay" style="max-width: 250px; height: auto;" src="https://imgplaceholder.com/420x320/ff7f7f/333333/fa-image">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <a href="/api/friendslist">API Friends List</a> |
        <a href="https://github.com/gothicreinne/FriendFinder"> Bootstrap Info </a>
    </footer>
</body>



<script>
    // var bestDisplay = require("../routing/apiRoutes.js");
    $("#submitSurvey").on("click", function (e) {
        event.preventDefault()
        var data = {
            name: $("#username").val(),
            piclink: $("#userpicture").val(),
            scores: [$("#sel1").val(),
            $("#sel2").val(),
            $("#sel3").val(),
            $("#sel4").val(),
            $("#sel5").val(),
            $("#sel6").val(),
            $("#sel7").val(),
            $("#sel8").val(),
            $("#sel9").val(),
            $("#sel10").val()]
        };
        console.log(data);
        $.post("/api/friendslist", data, function (response) {
            console.log("response", response);
        });
        $.get("/api/friendslist", function (req, res) {
            matchName = req.bestMatch.name;
            matchImage = req.bestMatch.piclink;
            $("#nameDisplay span").text(matchName);
            console.log(matchImage);
            $("#matchDisplay").attr("src", matchImage);

        });
        $("#username").val(" ");
        $("#userpicture").val(" ");
        $("#sel1").val(" ");
        $("#sel2").val(" ");
        $("#sel3").val(" ");
        $("#sel4").val(" ");
        $("#sel5").val(" ");
        $("#sel6").val(" ");
        $("#sel7").val(" ");
        $("#sel8").val(" ");
        $("#sel9").val(" ");
        $("#sel10").val(" ");

    })

    var matchName;
    var matchImage;

</script>

</html>